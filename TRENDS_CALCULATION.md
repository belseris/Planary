# üìä ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° (Trends Dashboard)

> ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ 4 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å:
1. **‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå** - ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ ‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° (‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô/‡πÅ‡∏¢‡πà‡∏•‡∏á/‡∏Ñ‡∏á‡∏ó‡∏µ‡πà)
2. **‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å** - Emoji tags ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏ö‡∏ß‡∏Å/‡∏•‡∏ö)
3. **‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì** - ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°
4. **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï** - ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà

---

## 1Ô∏è‚É£ ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå (Mood Trend)

### üì• ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á**: `diaries`
- **‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**: `mood_score` (‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô float ‡∏´‡∏£‡∏∑‡∏≠ string)
- **‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç**: `user_id = ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô`, `date` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å, `mood_score IS NOT NULL`

### üßÆ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

#### 1.1 ‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
```python
# ‡πÅ‡∏õ‡∏•‡∏á mood_score ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 1-5
if score == 'good':  # legacy support
    score = 4.0
elif score == 'bad':
    score = 2.0
else:
    score = float(score)
```

#### 1.2 ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢
```python
average = sum(scores) / len(scores)
# ‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 1 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
average = round(average, 1)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å 5 ‡∏ß‡∏±‡∏ô: [4.5, 3.0, 4.0, 3.5, 5.0]
average = (4.5 + 3.0 + 4.0 + 3.5 + 5.0) / 5 = 4.0
```

#### 1.3 ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏° (Trend)
```python
# ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÅ‡∏£‡∏Å vs ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏•‡∏±‡∏á
mid = len(scores) // 2
first_half = sum(scores[:mid]) / mid
second_half = sum(scores[mid:]) / (len(scores) - mid)

if second_half > first_half + 0.5:
    trend = "improving"  # üìà ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô
elif second_half < first_half - 0.5:
    trend = "declining"  # üìâ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏¢‡πà‡∏•‡∏á
else:
    trend = "stable"     # ‚û°Ô∏è ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
scores = [3.0, 3.5, 4.0, 4.5, 5.0]
first_half = (3.0 + 3.5) / 2 = 3.25
second_half = (4.0 + 4.5 + 5.0) / 3 = 4.5
difference = 4.5 - 3.25 = 1.25 > 0.5
‚Üí trend = "improving" üìà
```

---

## 2Ô∏è‚É£ ‡∏õ‡∏±‡∏à‡∏à‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å (Mood Factors)

### üì• ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á**: `diaries`
- **‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**: `mood_tags` (JSONB array), `mood_score`
- **‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç**: `user_id = ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ`, `date` ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å, `mood_tags IS NOT NULL`

### üßÆ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

#### 2.1 ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏° Tags
```python
for diary in diaries:
    score = float(diary.mood_score)
    
    if score >= 4:
        positive_tags.extend(diary.mood_tags)  # üëç ‡∏ö‡∏ß‡∏Å
    elif score <= 2:
        negative_tags.extend(diary.mood_tags)  # üëé ‡∏•‡∏ö
    else:
        neutral_tags.extend(diary.mood_tags)   # ‚öñÔ∏è ‡∏Å‡∏•‡∏≤‡∏á‡πÜ
```

#### 2.2 ‡∏ô‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (Top 5)
```python
from collections import Counter

positive_counter = Counter(positive_tags)
top_5_positive = positive_counter.most_common(5)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
positive_tags = ['üòä', 'üòä', 'üòä', 'üöÄ', 'üöÄ', 'üí™', 'üòä']
Counter: {
    'üòä': 4,  # ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
    'üöÄ': 2,  # ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏ú‡∏•
    'üí™': 1   # ‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á
}
‚Üí ‡πÅ‡∏™‡∏î‡∏á Top 5 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
```

---

## 3Ô∏è‚É£ ‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (Completion Rate)

### üì• ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á**: `activities`
- **‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**: `status` (normal, urgent, done, cancelled)
- **‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç**: `user_id = ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ`, `date` ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

### üßÆ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

#### 3.1 ‡∏ô‡∏±‡∏ö‡∏ï‡∏≤‡∏° Status
```python
status_count = {
    "done": 0,      # ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
    "normal": 0,    # ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°
    "urgent": 0,    # ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥
    "cancelled": 0  # ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
}

for activity in activities:
    status = activity.status or "normal"
    status_count[status] += 1
```

#### 3.2 ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
```python
total = len(activities)
completed = status_count["done"]

completion_rate = (completed / total) * 100
completion_rate = round(completion_rate, 1)  # ‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏© 1 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 11 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (done): 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥ (urgent): 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° (normal): 9 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (cancelled): 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

completion_rate = (2 / 11) * 100 = 18.18%
‚Üí ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô 18%
```

#### 3.3 ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
```python
for status, count in status_count.items():
    percentage = round((count / total) * 100, 1)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Progress Bar:**
```
‚ñ†‚ñ†‚ñ† ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (2) = 18%
‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ°‚ñ° ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° (9) = 82%
```

---

## 4Ô∏è‚É£ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (Life Balance)

### üì• ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏ï‡∏≤‡∏£‡∏≤‡∏á**: `activities`
- **‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**: `category` (‡πÄ‡∏£‡∏µ‡∏¢‡∏ô, ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô, ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢, ‡∏Ø‡∏•‡∏Ø)
- **‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç**: `user_id = ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ`, `date` ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

### üßÆ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

#### 4.1 ‡∏ô‡∏±‡∏ö‡∏ï‡∏≤‡∏° Category
```python
from collections import Counter

category_count = Counter()
for activity in activities:
    category = activity.category or "‡∏≠‡∏∑‡πà‡∏ô‡πÜ"
    category_count[category] += 1
```

#### 4.2 ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå
```python
total = len(activities)
for category, count in category_count.items():
    percentage = round((count / total) * 100, 1)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:**
```
‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 9 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
- ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: 4 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí 44.4%
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô: 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí 33.3%
- ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢: 2 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Üí 22.2%
```

#### 4.3 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Warning)
```python
# ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏î‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 60%
for category, percentage in data:
    if percentage >= 60:
        warning = f"‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏±‡∏ö{category}‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ({percentage}%) ‡∏•‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ö‡πâ‡∏≤‡∏á‡∏ô‡∏∞"
        break

# ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 10%
health_percentage = category_percentage.get("‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û", 0)
if health_percentage < 10 and total >= 10:
    warning = f"‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏Ñ‡πà {health_percentage}% ‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏á‡∏ô‡∏∞"
```

---

## ‚è∞ ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (Date Range)

### ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô get_date_range(period, offset)

#### Period = "week" (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)
```python
today = datetime.now().date()

# offset = 0: ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ
start = today - timedelta(days=today.weekday())  # ‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå
end = start + timedelta(days=6)                   # ‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå

# offset = -1: ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß
start = today - timedelta(days=today.weekday()) + timedelta(weeks=-1)
end = start + timedelta(days=6)

# offset = -2: 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏Å‡πà‡∏≠‡∏ô
start = today - timedelta(days=today.weekday()) + timedelta(weeks=-2)
end = start + timedelta(days=6)
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á** (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ = 23 ‡∏û.‡∏¢. 2568 = ‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå):
```
offset = 0:  start = 18 ‡∏û.‡∏¢., end = 24 ‡∏û.‡∏¢. (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ)
offset = -1: start = 11 ‡∏û.‡∏¢., end = 17 ‡∏û.‡∏¢. (‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß)
offset = -2: start = 4 ‡∏û.‡∏¢., end = 10 ‡∏û.‡∏¢. (2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏Å‡πà‡∏≠‡∏ô)
```

#### Period = "month" (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
```python
today = datetime.now().date()
target_month = today.month + offset
target_year = today.year

# ‡∏õ‡∏£‡∏±‡∏ö year ‡∏ñ‡πâ‡∏≤ month ‡∏ï‡∏¥‡∏î‡∏•‡∏ö
while target_month < 1:
    target_month += 12
    target_year -= 1

# ‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
start = datetime(target_year, target_month, 1).date()
if target_month == 12:
    end = datetime(target_year, 12, 31).date()
else:
    end = (datetime(target_year, target_month + 1, 1) - timedelta(days=1)).date()
```

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á** (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ = 23 ‡∏û.‡∏¢. 2568):
```
offset = 0:  start = 1 ‡∏û.‡∏¢., end = 30 ‡∏û.‡∏¢. (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)
offset = -1: start = 1 ‡∏ï.‡∏Ñ., end = 31 ‡∏ï.‡∏Ñ. (‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß)
offset = -2: start = 1 ‡∏Å.‡∏¢., end = 30 ‡∏Å.‡∏¢. (2 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô)
```

---

## üé® ‡∏™‡∏µ‡πÅ‡∏•‡∏∞ Label

### ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Activity Status)
| Status | Label | Color | Emoji |
|--------|-------|-------|-------|
| `done` | ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß | `#52c41a` (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß) | ‚úÖ |
| `urgent` | ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥ | `#faad14` (‡∏™‡πâ‡∏°) | üü† |
| `normal` | ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏° | `#595959` (‡πÄ‡∏ó‡∏≤) | ‚¨ú |
| `cancelled` | ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å | `#ff4d4f` (‡πÅ‡∏î‡∏á) | ‚ùå |

### ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Categories)
| Category | Label | Color | Emoji |
|----------|-------|-------|-------|
| ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô | `#00bcd4` | üìö |
| ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô | `#2196f3` | üíº |
| ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ | ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢ | `#4caf50` | üèãÔ∏è |
| ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô | ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô | `#ff9800` | üè† |
| ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß | ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß | `#9c27b0` | üë§ |
| ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û | ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û | `#e91e63` | ‚ù§Ô∏è‚Äçü©π |
| ‡∏≠‡∏∑‡πà‡∏ô‡πÜ | ‡∏≠‡∏∑‡πà‡∏ô‡πÜ | `#9e9e9e` | üìã |

---

## üîÑ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### Frontend (React Native)
1. ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô period ‡∏´‡∏£‡∏∑‡∏≠ offset
2. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `getDashboardSummary(period, offset)`
3. ‡πÅ‡∏™‡∏î‡∏á Loading indicator (300ms delay ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö smooth transition)
4. ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API
5. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï state ‡πÅ‡∏•‡∏∞ render UI

### Backend (FastAPI)
1. ‡∏£‡∏±‡∏ö parameters: `period`, `offset`
2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì `start_date`, `end_date` ‡∏à‡∏≤‡∏Å `get_date_range()`
3. Query database ‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
4. ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
5. ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô JSON

---

## üìä ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Response

```json
{
  "mood": {
    "average": 4.0,
    "trend": "improving",
    "total_entries": 5,
    "data": [
      {"date": "2024-11-18", "score": 3.5},
      {"date": "2024-11-19", "score": 4.0},
      {"date": "2024-11-20", "score": 4.5}
    ]
  },
  "mood_factors": {
    "positive": [
      {"emoji": "üòä", "count": 4},
      {"emoji": "üöÄ", "count": 2}
    ],
    "negative": [
      {"emoji": "üò´", "count": 3}
    ]
  },
  "completion": {
    "total": 11,
    "completed": 2,
    "completion_rate": 18.2,
    "data": [
      {"status": "normal", "label": "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°", "count": 9, "percentage": 81.8, "color": "#595959"},
      {"status": "done", "label": "‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß", "count": 2, "percentage": 18.2, "color": "#52c41a"}
    ]
  },
  "life_balance": {
    "total": 9,
    "data": [
      {"category": "‡∏ó‡∏≥‡∏á‡∏≤‡∏ô", "count": 4, "percentage": 44.4, "emoji": "üíº", "color": "#2196f3"},
      {"category": "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", "count": 3, "percentage": 33.3, "emoji": "üìö", "color": "#00bcd4"},
      {"category": "‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢", "count": 2, "percentage": 22.2, "emoji": "üèãÔ∏è", "color": "#4caf50"}
    ],
    "warning": null
  }
}
```

---

## üöÄ ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î (Future Enhancements)

### 1. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
- ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ vs ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß
- ‡πÅ‡∏™‡∏î‡∏á % ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô/‡∏•‡∏î‡∏•‡∏á
- Trend arrow (‚ÜóÔ∏è ‚ÜòÔ∏è ‚Üí)

### 2. Charts/Graphs
- Line Chart ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå
- Bar Chart ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Mood Factors
- Donut Chart ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Completion Rate
- Pie Chart ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Life Balance

### 3. AI Insights
- ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå pattern ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
- ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

### 4. Export Reports
- ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô PDF
- ‡πÅ‡∏ä‡∏£‡πå‡∏ú‡πà‡∏≤‡∏ô social media
- ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå/‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô

---

**‡∏™‡∏£‡∏∏‡∏õ**: ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å `diaries` ‡πÅ‡∏•‡∏∞ `activities` ‡∏°‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÇ‡∏î‡∏¢‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏° insights ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ üìä‚ú®
